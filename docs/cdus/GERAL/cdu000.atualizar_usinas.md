# **CDU000 – Atualizar Usinas**

* **Ator principal**: Gerente
* **Atores secundários**: Sistema
* **Resumo**: Permite ao gerente atualizar os dados cadastrais e tecnicos de uma usina, mantendo o historico das alteracoes.
* **Pré-condição**:

	* O gerente deve estar autenticado no sistema.
	* O gerente deve estar ativo.
	* A usina deve estar vinculada a empresa do gerente.

* **Pós-condição**:

	* Dados da usina sao atualizados, com historico preservado.

---
## **Mapeamento CDU -> Requisitos Funcionais**

| **Requisito** | **Descrição**           |
| ------------- | ----------------------- |
| RF08          | Atualização de Usina    |

---
## **Mapeamento CDU -> Regras de Negócio**

| **Código** | **Descrição**                                                                                                                                                |
| :--------: | :----------------------------------------------------------------------------------------------------------------------------------------------------------- |
|  **RN11**  | Não deve existir mais de uma usina com o mesmo identificador, dentro da mesma empresa.                                                                       |
|  **RN12**  | Apenas gerentes podem cadastrar, atualizar, ativar ou desativar usinas.                                                                                       |
|  **RN13**  | Todas as usina devem ter um endereço cadastrado no sistema, e associada à própria usina.                                                                     |
|  **RN14**  | Uma usina não pode ter mais de um endereço cadastrado.                                                                                                        |

---
## **Fluxo Principal**

|                **Ações do Ator**                |                                    **Ações do Sistema**                                   |
| :---------------------------------------------: | :---------------------------------------------------------------------------------------: |
| 1 - Acessa a opção “Listar Usinas”.             |                                                                                           |
|                                                 | 2 - Exibe usinas vinculadas a empresa do gerente.                                         |
| 3 - Seleciona uma usina para editar.            |                                                                                           |
|                                                 | 4 - Exibe formulario de edicao com dados atuais.                                          |
| 5 - Atualiza os dados e confirma.               |                                                                                           |
|                                                 | 6 - Valida as **Regras de Negócio**: **RN11**, **RN12**, **RN13** e **RN14**.             |
|                                                 | 7 - Salva as alteracoes e registra o historico.                                           |
| 8 - Visualiza os dados atualizados da usina.    |                                                                                           |

---
## **Fluxos Alternativos**

### **Fluxo Alternativo I – [Atualizar endereco da usina]**

|                **Ações do Ator**                |                      **Ações do Sistema**                     |
| :---------------------------------------------: | :-----------------------------------------------------------: |
| 1.1 - Seleciona a edicao de endereco.            |                                                               |
|                                                 | 1.2 - Exibe formulario de endereco.                           |
| 1.3 - Atualiza o endereco e confirma.            |                                                               |
|                                                 | 1.4 - Valida os dados e salva o endereco atualizado.          |
| 1.5 - Visualiza o endereco atualizado.           |                                                               |

---
## **Fluxos de Exceção**

### **Fluxo de Exceção I – [Tentativa de atualizar usina fora da empresa]**

|                      **Ações do Ator**                      |                        **Ações do Sistema**                        |
| :----------------------------------------------------------: | :----------------------------------------------------------------: |
| 0.1 - Tenta editar uma usina de outra empresa.               |                                                                    |
|                                                            | 0.2 - Bloqueia a ação e exibe mensagem de acesso não autorizado.    |

---
### **Fluxo de Exceção II – [Falha na validacao da atualizacao]**

|                       **Ações do Ator**                      |                                **Ações do Sistema**                               |
| :----------------------------------------------------------: | :-------------------------------------------------------------------------------: |
| 0.1 - Preenche formulario com dados invalidos ou incompletos.|                                                                                   |
|                                                              | 0.2 - Valida as **Regras de Negócio** aplicaveis.                                 |
|                                                              | 0.3 - Exibe mensagens de erro indicando campos invalidos.                         |
| 0.4 - Corrige os dados informados.                           |                                                                                   |

