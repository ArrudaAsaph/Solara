# CDU010 – Cadastrar Usina

> **Arquivo:** `cdu010_cadastrar_usina.md`
> **Descrição:** Caso de uso referente ao cadastro de usinas de geração de energia na empresa. Pode ser executado por **Empresa** ou **Gerente**, respeitando o vínculo com a própria empresa.

---

## Identificação

| **Campo** | **Valor** |
| :-------- | :-------- |
| **Código** | CDU010 |
| **Ator Principal** | Empresa / Gerente |
| **Atores Secundários** | Sistema |
| **Requisito Atendido** | RF07 |

---

## Resumo

Permite ao ator cadastrar uma nova usina com dados técnicos, identificador e endereço vinculados à empresa. O cadastro deve respeitar regras de unicidade e integridade de endereço por usina.

---

## Pré-condições

- O ator deve estar autenticado no sistema.
- O ator deve estar ativo e vinculado a uma empresa ativa.

---

## Pós-condições

- A usina é cadastrada e vinculada à empresa do ator.
- A usina é criada com endereço associado.
- O histórico de criação é registrado.

---

## Mapeamento: CDU → Requisitos Funcionais

| **Requisito** | **Descrição** |
| :------------ | :------------ |
| **RF07** | A empresa ou o gerente pode cadastrar usinas de geração de energia, informando dados técnicos, localização e vínculo com a empresa. |

---

## Mapeamento: CDU → Regras de Negócio

| **Código** | **Descrição** |
| :--------: | :------------ |
| **RN10** | Uma usina só pode ser cadastrada se estiver vinculada à empresa do ator administrativo responsável pelo cadastro. |
| **RN11** | Não deve existir mais de uma usina com o mesmo identificador dentro da mesma empresa. |
| **RN12** | Apenas empresa e gerentes podem cadastrar usinas. |
| **RN13** | Todas as usinas devem ter um endereço cadastrado no sistema, associado à própria usina. |
| **RN14** | Uma usina não pode ter mais de um endereço cadastrado. |
| **RN15** | Um endereço pode ter mais de uma usina cadastrada. |

---

## Fluxo Principal

| **Passo** | **Ações do Ator** | **Ações do Sistema** |
| :-------: | :---------------- | :------------------- |
| 1 | Acessa a opção "Cadastrar Usina". | |
| 2 | | Exibe formulário com dados técnicos, identificador e endereço da usina. |
| 3 | Preenche os dados e confirma o cadastro. | |
| 4 | | Valida as Regras de Negócio **RN10**, **RN11**, **RN12**, **RN13**, **RN14** e **RN15**. |
| 5 | | Cria a usina vinculada à empresa do ator e associa o endereço informado. |
| 6 | | Registra o histórico de criação da usina. |
| 7 | Visualiza a usina cadastrada com confirmação de sucesso. | |

---

## Fluxos de Exceção

### Fluxo de Exceção I – Identificador já existente na empresa

| **Passo** | **Ações do Ator** | **Ações do Sistema** |
| :-------: | :---------------- | :------------------- |
| 0.1 | Informa identificador de usina já utilizado na mesma empresa. | |
| 0.2 | | Valida a Regra de Negócio **RN11**. |
| 0.3 | | Bloqueia o cadastro e exibe mensagem de identificador duplicado. |

### Fluxo de Exceção II – Endereço não informado

| **Passo** | **Ações do Ator** | **Ações do Sistema** |
| :-------: | :---------------- | :------------------- |
| 0.4 | Tenta confirmar cadastro sem endereço da usina. | |
| 0.5 | | Valida a Regra de Negócio **RN13**. |
| 0.6 | | Exibe mensagem de erro solicitando preenchimento do endereço. |

### Fluxo de Exceção III – Tentativa de cadastro fora do escopo da empresa

| **Passo** | **Ações do Ator** | **Ações do Sistema** |
| :-------: | :---------------- | :------------------- |
| 0.7 | Tenta cadastrar usina fora da empresa à qual está vinculado. | |
| 0.8 | | Valida as Regras de Negócio **RN10** e **RN12**. |
| 0.9 | | Bloqueia a ação e exibe mensagem de acesso não autorizado. |
