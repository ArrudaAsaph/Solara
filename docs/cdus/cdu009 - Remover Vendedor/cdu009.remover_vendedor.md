# CDU009 – Remover Vendedor

> **Arquivo:** `cdu009_remover_vendedor.md`
> **Descrição:** Caso de uso referente à remoção de vendedores cadastrados, executada por **Empresa** ou **Gerente**, com restrição por vínculo empresarial e pendências comerciais/financeiras.

---

## Identificação

| **Campo** | **Valor** |
| :-------- | :-------- |
| **Código** | CDU009 |
| **Ator Principal** | Empresa / Gerente |
| **Atores Secundários** | Sistema |
| **Requisito Atendido** | RF24 |

---

## Resumo

Permite ao ator remover vendedores vinculados à própria empresa, desde que não existam contratos ativos ou comissionamentos pendentes. A ação deve manter rastreabilidade do responsável e do momento da remoção.

---

## Pré-condições

- O ator deve estar autenticado no sistema.
- O ator deve estar ativo e vinculado a uma empresa ativa.
- O vendedor alvo deve estar vinculado à mesma empresa do ator.

---

## Pós-condições

- O vendedor é removido com sucesso quando não houver pendências bloqueantes.
- O registro de auditoria da remoção é armazenado.

---

## Mapeamento: CDU → Requisitos Funcionais

| **Requisito** | **Descrição** |
| :------------ | :------------ |
| **RF24** | A empresa ou o gerente pode remover vendedores vinculados à própria empresa, respeitando as restrições de vínculo comercial/financeiro e mantendo rastreabilidade da ação. |

---

## Mapeamento: CDU → Regras de Negócio

| **Código** | **Descrição** |
| :--------: | :------------ |
| **RN23** | Empresa e gerente podem remover vendedores apenas da mesma empresa à qual estão vinculados. |
| **RN29** | Não é permitido remover vendedor com contrato ativo ou comissionamento pendente; nesses casos a ação deve ser bloqueada. |
| **RN09** | Vendedores não possuem acesso direto ao sistema, sendo entidade de controle comercial e financeiro. |

---

## Fluxo Principal

| **Passo** | **Ações do Ator** | **Ações do Sistema** |
| :-------: | :---------------- | :------------------- |
| 1 | Acessa a opção "Listar Vendedores". | |
| 2 | | Exibe os vendedores vinculados à empresa do ator. |
| 3 | Seleciona um vendedor da listagem. | |
| 4 | | Exibe os dados do vendedor e a opção "Remover". |
| 5 | Seleciona "Remover". | |
| 6 | | Exibe modal de confirmação da remoção. |
| 7 | Confirma a remoção. | |
| 8 | | Valida as Regras de Negócio **RN23** e **RN29**. |
| 9 | | Remove o vendedor e registra auditoria da ação. |
| 10 | Visualiza confirmação de remoção com sucesso. | |

---

## Fluxos de Exceção

### Fluxo de Exceção I – Tentativa de remover vendedor fora da empresa

| **Passo** | **Ações do Ator** | **Ações do Sistema** |
| :-------: | :---------------- | :------------------- |
| 0.1 | Tenta remover vendedor não vinculado à sua empresa. | |
| 0.2 | | Valida a Regra de Negócio **RN23**. |
| 0.3 | | Bloqueia a ação e exibe mensagem de acesso não autorizado. |

### Fluxo de Exceção II – Vendedor com vínculo ativo ou pendência

| **Passo** | **Ações do Ator** | **Ações do Sistema** |
| :-------: | :---------------- | :------------------- |
| 0.4 | Confirma remoção de vendedor com contrato ativo ou comissionamento pendente. | |
| 0.5 | | Valida a Regra de Negócio **RN29**. |
| 0.6 | | Bloqueia a remoção e exibe mensagem informando impedimento por vínculo pendente. |

### Fluxo de Exceção III – Cancelamento da remoção

| **Passo** | **Ações do Ator** | **Ações do Sistema** |
| :-------: | :---------------- | :------------------- |
| 0.7 | Cancela a ação no modal de confirmação. | |
| 0.8 | | Descarta a operação e mantém o vendedor na listagem. |
