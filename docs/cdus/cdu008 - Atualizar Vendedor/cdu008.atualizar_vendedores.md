# CDU008 – Atualizar Vendedor

> **Arquivo:** `cdu008_atualizar_vendedores.md`
> **Descrição:** Caso de uso referente à atualização dos dados cadastrais de vendedores existentes na empresa. Vendedores não são usuários do sistema — não possuem credenciais de acesso (RN09).

---

## Identificação

| **Campo** | **Valor** |
| :-------- | :-------- |
| **Código** | CDU008 |
| **Ator Principal** | Empresa / Gerente |
| **Atores Secundários** | Sistema |
| **Requisito Atendido** | RF22 |

---

## Resumo

Permite à Empresa ou ao Gerente atualizar os dados cadastrais e de comissionamento de um vendedor já existente, mantendo o histórico das alterações. Por não possuírem credenciais de acesso, não há restrição de senha para atualização dos dados do vendedor.

---

## Pré-condições

- O ator deve estar autenticado no sistema.
- O ator deve estar ativo e vinculado a uma empresa ativa.
- O vendedor a ser atualizado deve estar vinculado à mesma empresa do ator.

---

## Pós-condições

- Os dados do vendedor são atualizados com sucesso.
- O histórico das alterações é preservado.

---

## Mapeamento: CDU → Requisitos Funcionais

| **Requisito** | **Descrição** |
| :------------ | :------------ |
| **RF22** | A empresa ou o gerente pode atualizar os dados cadastrais e de comissionamento de vendedores vinculados à empresa, mantendo histórico das alterações. |

---

## Mapeamento: CDU → Regras de Negócio

| **Código** | **Descrição** |
| :--------: | :------------ |
| **RN23** | Empresa e gerente podem atualizar vendedores apenas da mesma empresa à qual estão vinculados. |
| **RN24** | Não deve existir mais de um vendedor com o mesmo CPF dentro da mesma empresa. |
| **RN09** | Vendedores cadastrados não possuem acesso direto ao sistema. Suas informações ficam salvas para fins de controle financeiro e comissionamento, porém não possuem credenciais de acesso. |

---

## Fluxo Principal

| **Passo** | **Ações do Ator** | **Ações do Sistema** |
| :-------: | :---------------- | :------------------- |
| 1 | Acessa a opção "Listar Vendedores". | |
| 2 | | Exibe a listagem de vendedores vinculados à empresa. |
| 3 | Seleciona um vendedor da listagem. | |
| 4 | | Exibe os dados cadastrais atuais do vendedor selecionado. |
| 5 | Seleciona a opção "Editar". | |
| 6 | | Exibe formulário de edição com os dados atuais preenchidos. |
| 7 | Atualiza as informações desejadas e confirma. | |
| 8 | | Valida campos obrigatórios e consistência dos dados, conforme **RN23**, **RN24** e **RN09**. |
| 9 | | Salva as alterações realizadas. |
| 10 | | Registra o histórico das alterações com identificação do ator responsável. |
| 11 | Visualiza os dados atualizados do vendedor com confirmação de sucesso. | |

---

## Fluxo Alternativo I – Atualizar dados de comissionamento

| **Passo** | **Ações do Ator** | **Ações do Sistema** |
| :-------: | :---------------- | :------------------- |
| 1.1 | No formulário de edição, acessa a seção "Comissionamento". | |
| 1.2 | | Exibe os campos de comissão: percentual, tipo e vigência. |
| 1.3 | Ajusta os valores de comissão e confirma. | |
| 1.4 | | Valida os dados e salva os ajustes. |
| 1.5 | | Registra o histórico das alterações de comissão. |
| 1.6 | Visualiza os dados de comissionamento atualizados. | |

---

## Fluxos de Exceção

### Fluxo de Exceção I – Falha na validação dos dados

| **Passo** | **Ações do Ator** | **Ações do Sistema** |
| :-------: | :---------------- | :------------------- |
| 0.1 | Informa dados inválidos ou incompletos. | |
| 0.2 | | Valida os campos obrigatórios e identifica inconsistências. |
| 0.3 | | Exibe mensagens de erro indicando os campos inválidos. |
| 0.4 | Corrige os dados e confirma novamente. | |

### Fluxo de Exceção II – Tentativa de atualizar vendedor fora da empresa

| **Passo** | **Ações do Ator** | **Ações do Sistema** |
| :-------: | :---------------- | :------------------- |
| 0.5 | Tenta atualizar vendedor não vinculado à sua empresa. | |
| 0.6 | | Valida a Regra de Negócio **RN23**. |
| 0.7 | | Bloqueia a ação e exibe mensagem de acesso não autorizado. |
